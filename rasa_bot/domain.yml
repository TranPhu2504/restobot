version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - bot_challenge
  
  # Äáº·t bÃ n
  - book_table
  - ask_available_tables
  - cancel_reservation
  - confirm_booking
  - modify_booking
  
  # Xem thá»±c Ä‘Æ¡n
  - view_menu
  - ask_menu_categories
  - ask_featured_dishes
  - ask_dish_price
  - ask_dish_details
  
  # Äáº·t mÃ³n
  - order_food
  - add_to_order
  - view_current_order
  - modify_order
  - confirm_order
  - cancel_order
  
  # Há»i thÃ´ng tin
  - ask_opening_hours
  - ask_address
  - ask_contact
  - ask_promotions
  
  # Gá»£i Ã½ mÃ³n Äƒn
  - recommend_dishes
  - ask_popular_dishes
  - ask_special_dishes

  # Quáº£n lÃ½ há»™i thoáº¡i nÃ¢ng cao  
  - contextual_question
  - modify_specific_field
  - order_item_reference

entities:
  - number_of_people
  - date
  - time
  - dish_name
  - quantity
  - table_type
  - location
  - confirmation
  - modification_type
  - phone_number
  - customer_name

slots:
  number_of_people:
    type: text
    initial_value: null
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: number_of_people
    
  reservation_date:
    type: text
    initial_value: null
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: date
    
  reservation_time:
    type: text
    initial_value: null
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: time
    
  table_type:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: table_type
    
  current_order:
    type: list
    initial_value: []
    influence_conversation: true
    mappings:
    - type: custom
    
  current_order_id:
    type: text
    initial_value: null
    influence_conversation: true
    mappings:
    - type: custom
    
  active_table_id:
    type: text
    initial_value: null
    influence_conversation: true
    mappings:
    - type: custom
    
  dish_name:
    type: text
    initial_value: null
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: dish_name
    
  last_mentioned_dish:
    type: text
    initial_value: null
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: dish_name
    
  # Context management slots
  conversation_context:
    type: text
    initial_value: null
    influence_conversation: true
    mappings:
    - type: custom
    
  current_step:
    type: text
    initial_value: null
    influence_conversation: true
    mappings:
    - type: custom
    
  pending_confirmation:
    type: bool
    initial_value: false
    influence_conversation: true
    mappings:
    - type: custom
    
  # Booking management slots
  last_booking_id:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: custom
    
  # Customer information slots
  customer_name:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: customer_name
    
  customer_phone:
    type: text
    initial_value: null
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: phone_number
    
  # Order management slots
  current_dish_quantity:
    type: float
    initial_value: null
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: quantity

  # Advanced conversation management slots
  last_mentioned_dishes:
    type: list
    initial_value: []
    influence_conversation: true
    mappings:
    - type: custom
    
  last_action_type:
    type: text
    initial_value: null
    influence_conversation: true
    mappings:
    - type: custom
    
  item_to_modify:
    type: text
    initial_value: null
    influence_conversation: true
    mappings:
    - type: custom
    
  modification_type:
    type: text
    initial_value: null
    influence_conversation: true
    mappings:
    - type: custom

forms:
  booking_form:
    required_slots:
      - number_of_people
      - reservation_date
      - reservation_time
      
  order_form:
    required_slots:
      - dish_name
      - current_dish_quantity

responses:
  utter_greet:
  - text: "Xin chÃ o! TÃ´i lÃ  trá»£ lÃ½ áº£o cá»§a nhÃ  hÃ ng. TÃ´i cÃ³ thá»ƒ giÃºp báº¡n Ä‘áº·t bÃ n, xem thá»±c Ä‘Æ¡n, gá»i mÃ³n hoáº·c tráº£ lá»i cÃ¡c cÃ¢u há»i vá» nhÃ  hÃ ng. Báº¡n cáº§n tÃ´i há»— trá»£ gÃ¬?"

  utter_goodbye:
  - text: "Táº¡m biá»‡t! Cáº£m Æ¡n báº¡n Ä‘Ã£ sá»­ dá»¥ng dá»‹ch vá»¥ cá»§a chÃºng tÃ´i. ChÃºc báº¡n cÃ³ má»™t ngÃ y tuyá»‡t vá»i!"

  utter_iamabot:
  - text: "TÃ´i lÃ  trá»£ lÃ½ áº£o cá»§a nhÃ  hÃ ng, Ä‘Æ°á»£c táº¡o ra Ä‘á»ƒ há»— trá»£ báº¡n vá»›i cÃ¡c dá»‹ch vá»¥ Ä‘áº·t bÃ n, gá»i mÃ³n vÃ  thÃ´ng tin nhÃ  hÃ ng."

  utter_ask_number_of_people:
  - text: "Báº¡n muá»‘n Ä‘áº·t bÃ n cho bao nhiÃªu ngÆ°á»i?"

  utter_ask_reservation_date:
  - text: "Báº¡n muá»‘n Ä‘áº·t bÃ n vÃ o ngÃ y nÃ o? (VÃ­ dá»¥: hÃ´m nay, ngÃ y mai, 20/10/2025)"

  utter_ask_reservation_time:
  - text: "Báº¡n muá»‘n Ä‘áº·t bÃ n vÃ o lÃºc máº¥y giá»? (VÃ­ dá»¥: 19:00, 7 giá» tá»‘i)"

  utter_ask_customer_name:
  - text: "Xin cho biáº¿t tÃªn cá»§a báº¡n Ä‘á»ƒ Ä‘áº·t bÃ n?"

  utter_ask_customer_phone:
  - text: "Xin cho biáº¿t sá»‘ Ä‘iá»‡n thoáº¡i liÃªn há»‡?"

  utter_ask_dish_name:
  - text: "Báº¡n muá»‘n gá»i mÃ³n gÃ¬?"

  utter_ask_current_dish_quantity:
  - text: "Báº¡n muá»‘n gá»i bao nhiÃªu pháº§n {last_mentioned_dish}?"

  utter_confirm_reservation:
  - text: "TÃ´i sáº½ Ä‘áº·t bÃ n cho {number_of_people} ngÆ°á»i vÃ o lÃºc {reservation_time} ngÃ y {reservation_date}. Báº¡n cÃ³ xÃ¡c nháº­n khÃ´ng?"

  utter_reservation_success:
  - text: "ÄÃ£ Ä‘áº·t bÃ n thÃ nh cÃ´ng! MÃ£ Ä‘áº·t bÃ n cá»§a báº¡n lÃ  #{reservation_id}. ChÃºng tÃ´i sáº½ liÃªn há»‡ vá»›i báº¡n Ä‘á»ƒ xÃ¡c nháº­n."

  utter_show_menu:
  - text: "ÄÃ¢y lÃ  thá»±c Ä‘Æ¡n cá»§a chÃºng tÃ´i. Báº¡n cÃ³ thá»ƒ xem theo danh má»¥c hoáº·c tÃ´i cÃ³ thá»ƒ giá»›i thiá»‡u nhá»¯ng mÃ³n Ä‘áº·c biá»‡t."

  utter_ask_dish_quantity:
  - text: "Báº¡n muá»‘n gá»i bao nhiÃªu pháº§n {dish_name}?"

  utter_add_to_order_success:
  - text: "ÄÃ£ thÃªm {quantity} pháº§n {dish_name} vÃ o Ä‘Æ¡n hÃ ng cá»§a báº¡n."

  utter_show_current_order:
  - text: "ÄÆ¡n hÃ ng hiá»‡n táº¡i cá»§a báº¡n:"

  utter_confirm_order:
  - text: "Báº¡n cÃ³ muá»‘n xÃ¡c nháº­n Ä‘Æ¡n hÃ ng nÃ y khÃ´ng?"

  utter_order_success:
  - text: "ÄÆ¡n hÃ ng cá»§a báº¡n Ä‘Ã£ Ä‘Æ°á»£c xÃ¡c nháº­n! MÃ£ Ä‘Æ¡n hÃ ng: #{order_id}. Thá»i gian chuáº©n bá»‹ Æ°á»›c tÃ­nh: {preparation_time} phÃºt."

  utter_opening_hours:
  - text: "NhÃ  hÃ ng má»Ÿ cá»­a tá»« 10:00 sÃ¡ng Ä‘áº¿n 10:00 tá»‘i, tá»« thá»© 2 Ä‘áº¿n chá»§ nháº­t."

  utter_address:
  - text: "Äá»‹a chá»‰ nhÃ  hÃ ng: 123 ÄÆ°á»ng Nguyá»…n VÄƒn Cá»«, Quáº­n 1, TP.HCM. Äiá»‡n thoáº¡i: (028) 3123 4567"

  utter_contact:
  - text: "ThÃ´ng tin liÃªn há»‡:\nğŸ“ Äiá»‡n thoáº¡i: (028) 3123 4567\nğŸ“§ Email: info@restobot.com\nğŸŒ Website: www.restobot.com"

  utter_current_promotions:
  - text: "ChÆ°Æ¡ng trÃ¬nh khuyáº¿n mÃ£i hiá»‡n táº¡i:\nğŸ‰ Giáº£m 20% cho Ä‘Æ¡n hÃ ng trÃªn 500k\nğŸ° Táº·ng mÃ³n trÃ¡ng miá»‡ng cho bÃ n tá»« 4 ngÆ°á»i\nğŸ¥¤ NÆ°á»›c uá»‘ng miá»…n phÃ­ vÃ o thá»© 3 hÃ ng tuáº§n"

  utter_popular_dishes:
  - text: "Nhá»¯ng mÃ³n Äƒn Ä‘Æ°á»£c yÃªu thÃ­ch nháº¥t táº¡i nhÃ  hÃ ng:"

  utter_special_dishes:
  - text: "MÃ³n Ä‘áº·c biá»‡t hÃ´m nay:"

  utter_default:
  - text: "ğŸ˜Š TÃ´i chÆ°a hiá»ƒu rÃµ Ã½ báº¡n. Äá»ƒ tÃ´i cÃ³ thá»ƒ há»— trá»£ tá»‘t hÆ¡n, báº¡n cÃ³ thá»ƒ nÃ³i cá»¥ thá»ƒ hÆ¡n Ä‘Æ°á»£c khÃ´ng?"
  - text: "ğŸ¤” CÃ³ váº» nhÆ° tÃ´i chÆ°a náº¯m Ä‘Æ°á»£c yÃªu cáº§u cá»§a báº¡n. HÃ£y thá»­ diá»…n Ä‘áº¡t theo cÃ¡ch khÃ¡c nhÃ©!"
  - text: "ğŸ’¡ TÃ´i cÃ³ thá»ƒ giÃºp báº¡n: **Ä‘áº·t bÃ n**, **xem thá»±c Ä‘Æ¡n**, **gá»i mÃ³n**, hoáº·c **há»i thÃ´ng tin nhÃ  hÃ ng**. Báº¡n cáº§n tÃ´i há»— trá»£ gÃ¬?"

  utter_ask_rephrase:
  - text: "ğŸ™ Xin lá»—i, báº¡n cÃ³ thá»ƒ nÃ³i láº¡i theo cÃ¡ch khÃ¡c Ä‘Æ°á»£c khÃ´ng? TÃ´i muá»‘n hiá»ƒu rÃµ Ä‘á»ƒ há»— trá»£ báº¡n tá»‘t nháº¥t."
  - text: "ğŸ˜… TÃ´i cÃ³ thá»ƒ hiá»ƒu nháº§m Ã½ báº¡n. Báº¡n cÃ³ thá»ƒ diá»…n Ä‘áº¡t rÃµ hÆ¡n má»™t chÃºt Ä‘Æ°á»£c khÃ´ng?"

actions:
  # Menu actions
  - action_show_menu
  - action_show_popular_dishes
  - action_show_special_dishes
  - action_show_bestseller_dishes
  - action_ask_dish_details
  - action_ask_dish_price
  - action_recommend_dishes

  # Booking actions
  - action_show_available_tables
  - action_book_table
  - action_cancel_reservation
  - action_confirm_cancel_reservation
  - action_confirm_booking
  - action_modify_booking

  # Order actions
  - action_add_to_order
  - action_view_current_order
  - action_show_current_order
  - action_confirm_order
  - action_confirm_order_final
  - action_cancel_order
  - action_confirm_cancel_order
  - action_deny_cancellation
  - action_modify_order
  - action_remove_from_order
  - action_modify_order_item

  # Info actions
  - action_show_opening_hours
  - action_show_address
  - action_show_contact
  - action_show_promotions

  # Conversation management actions
  - action_handle_contextual_query
  - action_reset_context
  - action_conversation_manager
  - action_update_conversation_context
  - action_smart_suggestion

  # Form actions
  - booking_form
  - order_form

  # Utility actions
  - action_deny_request

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true